/* --- START OF FILE momotalk-theme.css (蔚蓝档案 Momotalk 风格) --- */
:root {
    /* Momotalk Inspired Palette */
    --momo-primary-rgb: 255, 105, 180; /* 粉色 (For rgba usage) */
    --momo-primary: rgb(var(--momo-primary-rgb));       /* #ff69b4 */
    --momo-primary-dark: rgb(230, 90, 160); /* 深粉色 (Hover) */
    --momo-secondary-rgb: 255, 230, 242; /* 淡粉背景 (For rgba) */
    --momo-secondary: rgb(var(--momo-secondary-rgb));   /* #ffe6f2 */
    --momo-accent-rgb: 255, 179, 217; /* 强调浅粉 (For rgba) */
    --momo-accent: rgb(var(--momo-accent-rgb));         /* #ffb3d9 */
    --momo-neutral: #fff0f5;    /* 中性粉白 (输入框, 卡片) */
    --momo-text-dark-rgb: 51, 51, 51; /* 深灰文字 */
    --momo-text-dark: rgb(var(--momo-text-dark-rgb));
    --momo-text-light: #888; /* 浅灰文字 (比原777稍亮) */
    --momo-text-inverted: #ffffff;
    --momo-border: rgba(var(--momo-accent-rgb), 0.4); /* 边框 - 强调浅粉/40 */
    --momo-border-light: rgba(var(--momo-accent-rgb), 0.25); /* 更浅的边框 */
    --momo-white: #ffffff;
    --momo-white-alpha-70: rgba(255, 255, 255, 0.75); /* 半透明白 */
    --momo-blue-sky-rgb: 135, 206, 250; /* 天蓝色 (优香代表色之一) */
    --momo-blue-sky: rgb(var(--momo-blue-sky-rgb));
    --momo-blue-dark: rgb(100, 170, 220); /* 深蓝色 */


    /* 角色特定颜色 (Character Specific Colors - 示例) */
    /* 以早濑优香为例 */
    --yuuka-primary: var(--momo-blue-sky); /* 早濑优香主色调 - 天蓝 */
    --yuuka-secondary: #e0f2fe;        /* 早濑优香辅助色 - 淡蓝 */
    --yuuka-text: #0d47a1;             /* 早濑优香相关文字深蓝 */

    /* 覆盖 P2P Chat 原有变量 */
    --primary-color: var(--momo-primary);
    --primary-color-dark: var(--momo-primary-dark);
    --secondary-color: var(--momo-secondary);
    --text-color: var(--momo-text-dark);
    --text-color-light: var(--momo-text-light);
    --text-color-inverted: var(--momo-text-inverted);
    --accent-color: var(--momo-blue-sky); /* 在线/重要提示 - 使用蓝色 */
    --danger-color: #f44336; /* 保持红色 */
    --warning-color: #ff9800; /* 保持橙色 */
    --sent-bg-color: var(--momo-primary); /* 发送消息 - 粉色 */
    --received-bg-color: var(--momo-white); /* 接收消息 - 白色 */
    --border-color: var(--momo-border);
    --hover-bg-color: rgba(var(--momo-primary-rgb), 0.08); /* 悬停 - 极淡粉 */
    --active-bg-color: rgba(var(--momo-primary-rgb), 0.15); /*激活 - 淡粉 */
    --sidebar-width: 300px;
    --header-height: 60px;
    --input-area-height: auto;
    --border-radius: 10px; /* Momotalk 风格圆角 */
    --border-radius-full: 9999px; /* 全圆角 */
    --font-family: "Roboto", "Segoe UI", "Helvetica Neue", Arial, sans-serif; /* 现代无衬线字体 */
    --box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08); /* 柔和阴影 */
    --special-contact-color: var(--yuuka-primary); /* 特殊联系人（优香）颜色 */
}

* {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
}

body {
    font-family: var(--font-family);
    background-color: var(--momo-secondary); /* 应用整体背景 */
    color: var(--text-color);
    line-height: 1.6;
    overflow: hidden;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
}

.app-container {
    display: flex;
    width: 100%;
    max-width: 1400px;
    height: 100vh;
    max-height: 95vh;
    background-color: var(--momo-white); /* 应用主容器背景 */
    box-shadow: 0 5px 20px rgba(var(--momo-primary-rgb), 0.1); /* 粉色调阴影 */
    border-radius: 16px; /* 更大的圆角 */
    overflow: hidden;
}

/* --- 滚动条美化 (Scrollbar Styling) --- */
::-webkit-scrollbar {
    width: 6px;
    height: 6px;
}
::-webkit-scrollbar-track {
    background: rgba(var(--momo-accent-rgb), 0.1);
    border-radius: var(--border-radius-full);
}
::-webkit-scrollbar-thumb {
    background: rgba(var(--momo-primary-rgb), 0.5);
    border-radius: var(--border-radius-full);
}
::-webkit-scrollbar-thumb:hover {
    background: var(--momo-primary);
}

/* --- Sidebar Navigation (侧边栏) --- */
.sidebar-nav {
    width: var(--sidebar-width);
    background-color: var(--momo-white);
    border-right: 1px solid var(--momo-border-light);
    display: flex;
    flex-direction: column;
    transition: margin-left 0.3s ease-in-out;
}

.sidebar-header {
    padding: 10px 15px;
    display: flex;
    align-items: center;
    border-bottom: 1px solid var(--momo-border-light);
    height: var(--header-height);
}

.menu-btn {
    color: var(--text-color-light);
}
.menu-btn:hover {
    color: var(--primary-color);
}

.search-bar {
    background-color: var(--momo-neutral);
    border: 1px solid var(--momo-border);
    color: var(--text-color);
    border-radius: var(--border-radius-full);
    padding: 8px 15px;
}
.search-bar::placeholder {
    color: var(--text-color-light);
}
.search-bar:focus {
    border-color: var(--primary-color);
    box-shadow: 0 0 0 2px rgba(var(--momo-primary-rgb),0.2);
}

.nav-tabs {
    border-bottom: 1px solid var(--momo-border-light);
}
.nav-tab {
    color: var(--text-color-light);
    font-weight: 500;
}
.nav-tab:hover {
    color: var(--primary-color);
}
.nav-tab.active {
    color: var(--primary-color);
    border-bottom-color: var(--primary-color);
}

.chat-list-item {
    padding: 12px 15px;
    border-bottom: 1px solid var(--momo-border-light);
}
.chat-list-item:hover {
    background-color: var(--hover-bg-color);
}
.chat-list-item.active {
    background-color: var(--active-bg-color);
}
.chat-list-item.active .chat-list-name { /* 活动项名字用主题色 */
    color: var(--primary-color);
}

.chat-list-avatar {
    width: 48px; /* 稍大头像 */
    height: 48px;
    border-radius: var(--border-radius); /* Momotalk 头像可以是方圆 */
    background-color: var(--momo-accent); /* 默认头像用浅粉 */
    color: var(--primary-color);
    font-weight: 600;
    border: 2px solid transparent; /* 准备给活动项加边框 */
}
.chat-list-item.active .chat-list-avatar {
    border-color: var(--primary-color);
}
/* 角色头像颜色应用 - 早濑优香 */
.chat-list-item.special-contact.AI_早濑优香 .chat-list-avatar,
.chat-avatar-main.AI_早濑优香,
.details-avatar.AI_早濑优香,
#callingModalAvatar.AI_早濑优香 {
    background-color: var(--yuuka-secondary); /* 优香头像背景淡蓝 */
    color: var(--yuuka-text); /* 优香头像文字深蓝 */
    border-color: var(--yuuka-primary); /* 优香头像边框天蓝 */
}
.chat-list-avatar .avatar-image { /* 确保图片填满并保持圆角 */
    width: 100%;
    height: 100%;
    object-fit: cover;
    border-radius: calc(var(--border-radius) - 2px); /* 配合边框 */
}

.chat-list-badge { /* 未读消息徽章 */
    background-color: var(--primary-color);
    color: var(--text-color-inverted);
    padding: 3px 8px;
    border-radius: var(--border-radius-full);
    font-size: 11px;
}

.new-chat-fab { /* 新建聊天按钮 */
    background-color: var(--primary-color);
    color: var(--text-color-inverted);
    box-shadow: 0 4px 10px rgba(var(--momo-primary-rgb), 0.3);
    width: 56px;
    height: 56px;
    border-radius: var(--border-radius-full);
}
.new-chat-fab:hover {
    background-color: var(--primary-color-dark);
}

/* --- Main Chat Area (主聊天区) --- */
.chat-area {
    background-color: var(--momo-white-alpha-70); /* 主聊天区用半透明白，透出底色 */
}

.chat-header-main {
    background-color: var(--momo-white); /* 头部白色实底 */
    padding: 0 20px;
}
.chat-avatar-main { /* 头部当前聊天对象头像 */
    width: 44px;
    height: 44px;
    border: 2px solid var(--momo-border);
    border-radius: var(--border-radius); /* 与列表头像一致 */
}
.chat-title-main {
    font-weight: 600;
    font-size: 18px;
}
.header-action-btn {
    color: var(--text-color-light);
    font-size: 22px; /* 图标稍大 */
    padding: 6px;
}
.header-action-btn:hover {
    color: var(--primary-color);
    background-color: var(--hover-bg-color);
    border-radius: var(--border-radius-full);
}

.chat-messages-container {
    padding: 20px;
}
.no-chat-selected .logo-placeholder {
    font-size: 70px;
    color: var(--momo-accent); /* 用浅粉色 */
}
.status-indicator.global {
    background-color: var(--momo-neutral);
    border: 1px solid var(--momo-border);
    color: var(--primary-color);
    padding: 8px 12px;
    border-radius: var(--border-radius);
}

/* 消息气泡 */
.message {
    padding: 10px 15px; /* 气泡内边距 */
    border-radius: 16px; /* 更圆的气泡 */
    box-shadow: 0 1px 3px rgba(0,0,0,0.06);
}
.message.sent {
    background-color: var(--sent-bg-color); /* 已在root中定义 */
    color: var(--text-color-inverted);
    border-bottom-right-radius: 4px; /* Momotalk 特色尖角 */
}
.message.received {
    background-color: var(--received-bg-color); /* 已在root中定义 */
    border: 1px solid var(--momo-border-light);
    border-bottom-left-radius: 4px; /* Momotalk 特色尖角 */
}
.message.system { /* 系统消息 */
    background-color: var(--momo-neutral);
    color: var(--primary-color);
    font-size: 13px;
    padding: 6px 12px;
    border-radius: var(--border-radius-full);
}
.message-sender { /* 群聊中发送者名称 */
    color: var(--primary-color);
    font-weight: 500;
    font-size: 14px;
    margin-bottom: 3px;
}
/* 特定角色发送消息时的名称颜色 - 早濑优香 */
.message.received[data-sender-id="AI_早濑优香"] .message-sender {
    color: var(--yuuka-primary); /* 优香消息发送者用天蓝色 */
}

.message .timestamp {
    color: var(--text-color-light);
    font-size: 11px;
}
.message.sent .timestamp { /* 已发送消息的时间戳 */
    color: rgba(var(--momo-text-inverted-rgb, 255,255,255), 0.7);
}

/* 文件、图片、语音消息 */
.message img.file-preview-img, .message video.file-preview-video {
    border-radius: var(--border-radius);
    max-height: 250px;
}
.message .file-info {
    background-color: var(--momo-neutral);
    padding: 10px;
    border-radius: var(--border-radius);
}
.message .download-btn {
    color: var(--primary-color);
    font-weight: 500;
}
.message .voice-message button.play-voice-btn {
    background: var(--primary-color);
    width: 32px;
    height: 32px;
    border-radius: var(--border-radius-full);
}

.chat-input-container {
    background-color: var(--momo-white); /* 输入区白色实底 */
    border-top: 1px solid var(--momo-border-light);
    padding: 12px 15px;
}
#messageInput {
    background-color: var(--momo-neutral);
    border: 1px solid var(--momo-border);
    color: var(--text-color);
    border-radius: var(--border-radius-full); /* 全圆角输入框 */
    padding: 12px 18px; /* 输入框内边距 */
    min-height: 46px; /* 适应内边距 */
}
#messageInput::placeholder {
    color: var(--text-color-light);
}
#messageInput:focus {
    border-color: var(--primary-color);
    box-shadow: 0 0 0 2px rgba(var(--momo-primary-rgb),0.2);
}

.icon-btn { /* 输入区图标按钮 */
    color: var(--text-color-light);
    width: 42px;
    height: 42px;
}
.icon-btn:hover {
    color: var(--primary-color);
    background-color: var(--hover-bg-color);
}
#sendButtonMain { /* 发送按钮 */
    background-color: var(--primary-color);
    color: var(--text-color-inverted);
    border-radius: var(--border-radius-full);
    width: auto; /* 宽度自适应内容 */
    padding-left: 18px;
    padding-right: 18px;
    font-weight: 500;
}
#sendButtonMain:hover {
    background-color: var(--primary-color-dark);
}
#voiceButtonMain.recording {
    color: var(--danger-color);
    animation: momo-pulse 1.5s infinite;
}
@keyframes momo-pulse { /* 呼吸灯效果 */
    0% { box-shadow: 0 0 0 0 rgba(var(--danger-color-rgb, 244,67,54), 0.4); } /* 假设danger-color-rgb */
    70% { box-shadow: 0 0 0 10px rgba(var(--danger-color-rgb, 244,67,54), 0); }
    100% { box-shadow: 0 0 0 0 rgba(var(--danger-color-rgb, 244,67,54), 0); }
}


/* --- Details Panel (详情面板) --- */
.details-panel {
    background-color: var(--momo-white);
    border-left: 1px solid var(--momo-border-light);
}
.details-header {
    background-color: var(--momo-white);
    padding: 0 20px;
}
.details-header h3 {
    font-weight: 600;
    font-size: 18px;
}
.details-avatar { /* 详情面板中的头像 */
    width: 100px; /* 更大头像 */
    height: 100px;
    border-radius: var(--border-radius); /* 方圆 */
    border: 3px solid var(--momo-border);
    margin: 10px auto 20px auto;
}
#detailsName {
    font-size: 20px;
    font-weight: 600;
}
#detailsId, #detailsStatus {
    font-size: 14px;
}

/* AI 角色 "关于" 部分 */
#aiContactAboutSection {
    margin-top: 20px;
}
#aiContactAboutSection h4 {
    font-size: 16px;
    font-weight: 500;
    color: var(--text-color);
    margin-bottom: 10px;
    display: flex;
    align-items: center;
}
#aiContactAboutSection h4 span { /* "AI Name" 突出显示 */
    color: var(--special-contact-color); /* 优香用蓝色 */
    margin-left: 5px;
}
#aiContactDetailsContent {
    background-color: var(--momo-neutral);
    padding: 15px;
    border-radius: var(--border-radius);
    border: 1px solid var(--momo-border-light);
}
#aiContactDetailsContent p strong { /* "基本信息", "关于 AI Name" 标题 */
    color: var(--text-color);
    font-weight: 500;
    font-size: 15px;
    margin-bottom: 8px;
    display: block;
}
#aiContactBasicInfoList {
    padding-left: 5px;
}
#aiContactBasicInfoList li {
    margin-bottom: 6px;
    font-size: 14px;
    list-style: none; /* 移除默认列表样式 */
    padding-left: 0;
}
#aiContactBasicInfoList li strong { /* 标签加粗 */
    min-width: 60px; /* 固定标签宽度，使其对齐 */
    display: inline-block;
    margin-right: 5px;
}
#aiContactAboutText {
    color: var(--text-color-light);
    font-size: 14px;
    line-height: 1.7;
}

/* 通用按钮样式 */
.btn {
    border-radius: var(--border-radius-full); /* 按钮全圆角 */
    padding: 10px 20px; /* 按钮内边距 */
    font-weight: 500;
    transition: all 0.2s ease-in-out;
    border: none;
}
.btn-primary { background-color: var(--primary-color); color: var(--text-color-inverted); }
.btn-primary:hover { background-color: var(--primary-color-dark); transform: translateY(-1px); box-shadow: 0 2px 5px rgba(var(--momo-primary-rgb),0.2); }
.btn-secondary { background-color: var(--momo-accent); color: var(--momo-text-dark); }
.btn-secondary:hover { background-color: rgba(var(--momo-accent-rgb),0.8); transform: translateY(-1px); box-shadow: 0 2px 5px rgba(var(--momo-accent-rgb),0.2); }
.btn-danger { background-color: var(--danger-color); color: var(--text-color-inverted); }
.btn-danger:hover { background-color: #d32f2f; transform: translateY(-1px); box-shadow: 0 2px 5px rgba(var(--danger-color-rgb,244,67,54),0.2); }
.btn-success { background-color: var(--momo-blue-sky); color: var(--text-color-inverted); } /* 成功按钮用蓝色 */
.btn-success:hover { background-color: var(--momo-blue-dark); transform: translateY(-1px); box-shadow: 0 2px 5px rgba(var(--momo-blue-sky-rgb),0.2); }


/* --- Modals (模态框) --- */
.loading-overlay {
    background-color: rgba(var(--momo-secondary-rgb), 0.8); /* 半透明淡粉背景 */
}
.loading-spinner {
    border-color: rgba(var(--momo-primary-rgb),0.2);
    border-top-color: var(--momo-primary); /* 加载动画用粉色 */
}

.modal-like {
    background-color: rgba(var(--momo-text-dark-rgb), 0.4); /* 模态框背景遮罩 */
}
.modal-content {
    background-color: var(--momo-white);
    border-radius: 16px; /* 模态框大圆角 */
    box-shadow: 0 8px 25px rgba(var(--momo-primary-rgb), 0.15);
}
.modal-header {
    border-bottom: 1px solid var(--momo-border-light);
}
.modal-header h2 { color: var(--primary-color); font-size: 20px; font-weight: 600; }
.close-modal-btn:hover { color: var(--primary-color); }

.modal-body input[type="text"], .modal-body textarea {
    background-color: var(--momo-neutral);
    color: var(--text-color);
    border: 1px solid var(--momo-border);
    border-radius: var(--border-radius);
    padding: 12px;
}
.modal-body input[type="text"]::placeholder, .modal-body textarea::placeholder {
    color: var(--text-color-light);
}

.user-id-display #modalUserIdValue {
    background: var(--momo-neutral);
    color: var(--primary-color);
    border: 1px dashed var(--momo-border);
    padding: 8px 12px;
    border-radius: var(--border-radius);
}

/* 视频通话相关 */
.video-call-avatar { /* 用于来电/去电弹窗的头像 */
    background-color: var(--momo-primary);
    border: 3px solid var(--momo-white);
    box-shadow: 0 2px 6px rgba(0,0,0,0.1);
}
.video-call-container-main {
    background: rgba(var(--momo-text-dark-rgb), 0.9);
}
.video-call-container-main #localVideo {
    border-color: var(--momo-white);
    border-radius: var(--border-radius);
}
.video-call-container-main.audio-only-mode .video-streams {
    background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 24 24" fill="rgb(255,179,217)"><path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/></svg>'); /* 粉色人形图标 */
    background-size: 80px 80px;
    background-repeat: no-repeat;
    background-position: center;
    background-color: rgba(var(--momo-secondary-rgb),0.9);
}
.video-call-controls {
    background-color: rgba(var(--momo-text-dark-rgb), 0.3);
    border-radius: var(--border-radius-full);
    padding: 12px 15px;
}
.video-call-button {
    box-shadow: 0 1px 3px rgba(0,0,0,0.2);
    background-color: var(--momo-white);
    color: var(--text-color);
}
.video-call-button.end-call { background: var(--danger-color); color: var(--text-color-inverted); }
.video-call-button.active { background: var(--primary-color); color: var(--text-color-inverted); }

/* 状态指示器 */
.quality-indicator.quality-good { background: var(--accent-color); } /* 已是蓝色 */
.online-dot {
    background-color: var(--accent-color); /* 在线点用蓝色 */
    box-shadow: 0 0 5px rgba(var(--momo-blue-sky-rgb), 0.7);
}

/* 开关按钮 */
.slider { background-color: var(--momo-border); border-radius: var(--border-radius-full); height: 26px; }
input:checked + .slider { background-color: var(--primary-color); }
input:focus + .slider { box-shadow: 0 0 0 2px rgba(var(--momo-primary-rgb),0.2); }
.slider:before { background-color: var(--momo-white); height: 20px; width: 20px; bottom: 3px; left: 3px;} /* 小手柄 */
input:checked + .slider:before { transform: translateX(24px); }


/* 确保特定隐藏部分确实被隐藏 */
#detailsPanelContent #aiContactAboutSection, /* AI "关于" */
#detailsPanelContent #contactActionsDetails, /* 普通联系人操作 */
#detailsPanelContent #detailsGroupManagement #addGroupMemberArea, /* 群管理 - 加人 */
#detailsPanelContent #detailsGroupManagement #leftMembersArea, /* 群管理 - 离开成员 */
#detailsPanelContent #groupActionsDetails, /* 群操作 */
#detailsPanelContent #dissolveGroupBtnDetails, /* 解散群 */
#mainMenuModal .settings-section.manual-connection-advanced, /* 主菜单 - 手动连接 */
#mainMenuModal #modalResetAllConnectionsBtn { /* 主菜单 - 重置连接 */
    display: none;
}

/* 特定于AI角色显示"关于"区域的样式 */
.details-panel.ai-contact-active #aiContactAboutSection {
    display: block;
}
.details-panel.human-contact-active #contactActionsDetails {
    display: block;
}
.details-panel.group-chat-active #detailsGroupManagement,
.details-panel.group-chat-active #groupActionsDetails {
    display: block;
}
/* JS 会根据是否群主及具体逻辑来控制 #addGroupMemberArea, #leftMembersArea, #dissolveGroupBtnDetails 的显示 */


/* 重新连接提示 */
.reconnect-prompt {
    background-color: var(--momo-neutral);
    color: var(--primary-color);
    border-left: 4px solid var(--primary-color);
    box-shadow: 0 2px 5px rgba(var(--momo-primary-rgb), 0.1);
    padding: 12px 15px;
    border-radius: var(--border-radius);
}

#callingModal #callingModalAvatar {
    /* 这里可以根据被呼叫人的ID（如果能传递）动态改变背景色，
       或保持一个统一的呼叫中头像样式 */
}
